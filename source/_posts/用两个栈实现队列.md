---
title: 用两个栈实现队列
date: 2017-01-17 18:25:59
tags: [python,栈,队列,数据结构]
categories: [学习,程序员,数据结构]
---

首先栈的特点是“先进后出”，队列则是“先进先出”，所以要实现用两个栈来实现一个队列, 可按照如下思路：
假设两个栈分别叫stack1和stack2，Python中的list的append方法可当做入栈，pop则为出栈。
- 如果进行入队列操作，则将数据加入stack1中，即stack1.append(data)
- 一旦进行出队列操作，则首先查看stack2中是否有数据
    - 如果有数据，则先将stack2中的数据弹出，即实现出队列操作
    - 如果没有数据，则将stack1中所有的数据都pop()到stack2中，这样就可以实现倒序，即最先进入stack1的位于stack2的最上面，所以下次stack2进行pop()操作时就与队列操作规则相统一了。

代码实现:
<!--more-->
```python
# -*- coding:utf-8 -*-
class Solution:
    def __init__(self):
        self.stack1 = []
        self.stack2 = []
    def push(self, node):
        # write code here
        self.stack1.append(node)
    def pop(self):
        # return xx
        if len(self.stack2):
            return self.stack2.pop()
       	else:
            while len(self.stack1) != 0:
                self.stack2.append(self.stack1.pop())
            return self.stack2.pop()
```

光说不练假把式，举个栗子。
假设数据为1,2,3,4.执行的操作时**[push1,push2,push3,pop,pop,push4,pop,pop]**

- 首先数据1,2,3进入栈1,即 **[push1,push2,push3]** 操作

![](http://p1.bqimg.com/567571/7fe799cd197e204b.png)

- 下面进行 **[pop,pop]** 操作，首先会判断栈2是否为空，因为是空的，所以需要先将栈1中所有数据pop到栈2，如下图

![](http://p1.bqimg.com/567571/a309b516728ee9f4.png)

- 因为只有两次pop操作，所以栈2中还有数据3等待弹出。而后又加入了4，即进入栈1.如下图

![](http://p1.bqimg.com/567571/9624dab02bc42ca2.png)

- 最后进行两次pop操作，先分析第一次pop操作。因为栈2中还有数据3，所以栈1中的数据4不用出栈，直接将数据3弹出即可。得到下图

![](http://p1.bqimg.com/567571/d3a14657bf2178f5.png)

- 最后一次pop操作，需要先将栈1中的数据4弹出，并压到栈2中如下图

![](http://p1.bqimg.com/567571/eeab7c3a2608622d.png)

- 然后再对2执行pop操作。

![](http://p1.bqimg.com/567571/dccf44d994b000cc.png)

